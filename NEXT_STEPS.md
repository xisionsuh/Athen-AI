# Athena AI - 다음 진행 사항 제안서

## 🎯 Phase 1: 사용자 경험 개선 (즉시 진행)

### 1.1 출처 표시 강화 ⚠️ **높은 우선순위**

**현재 상태**: 웹 검색 결과는 메타데이터에만 포함되어 있음

**구현 작업**:
1. **응답에 출처 링크 명시적 표시**
   - 웹 검색 결과를 응답 하단에 "출처" 섹션으로 표시
   - 각 출처를 클릭 가능한 링크로 제공
   - 파일: `public/app.js`의 `addMessage()` 함수 수정

2. **웹 검색 결과 포맷팅 개선**
   - `src/utils/webSearch.js`에서 검색 결과에 URL, 제목, 요약 포함
   - 응답 메타데이터에 구조화된 출처 정보 포함

3. **출처 표시 UI 컴포넌트 추가**
   - 채팅 메시지 하단에 접을 수 있는 "출처 보기" 섹션 추가
   - CSS 스타일링 추가

**예상 작업 시간**: 2-3시간

---

### 1.2 Debate/Voting 모드 세부 내용 표시 ⚠️ **높은 우선순위**

**현재 상태**: 각 AI의 의견은 저장되지만 UI에 표시 안됨

**구현 작업**:
1. **Debate 모드 세부 의견 모달 추가**
   - `public/index.html`에 Debate 모달 추가
   - 각 AI의 Round별 의견을 탭으로 표시
   - 파일: `public/app.js`에 `showDebateDetails()` 함수 추가

2. **Voting 모드 투표 결과 표시**
   - 각 AI의 투표와 의견을 시각적으로 표시
   - 다수결/소수 의견 구분 표시

3. **메타데이터에서 Debate/Voting 정보 추출**
   - `metadata.debates`, `metadata.votes` 정보를 UI에 렌더링
   - "각 AI의 의견 보기" 링크를 Debate/Voting 모드일 때만 표시

**예상 작업 시간**: 3-4시간

---

## 🚀 Phase 2: 핵심 기능 완성 (단기 개선)

### 2.1 Google 로그인 구현 ⚠️ **중간 우선순위**

**현재 상태**: 패키지 설치됨, 로직 미구현

**구현 작업**:
1. **Passport Google OAuth 전략 설정**
   ```javascript
   // src/server/auth.js 생성
   - Passport Google OAuth20 전략 설정
   - 세션 설정 (express-session)
   - 사용자 직렬화/역직렬화
   ```

2. **인증 라우트 추가**
   ```javascript
   // src/server/routes.js에 추가
   GET  /auth/google          - Google 로그인 시작
   GET  /auth/google/callback - OAuth 콜백 처리
   GET  /auth/logout          - 로그아웃
   GET  /auth/status          - 현재 로그인 상태 확인
   ```

3. **프론트엔드 통합**
   - `public/login.html` 수정하여 Google 로그인 버튼 추가
   - 로그인 상태 확인 및 리다이렉트 로직
   - `public/app.js`에 로그인 상태 체크 추가

4. **세션 관리**
   - 로그인한 사용자 정보를 세션에 저장
   - API 요청 시 사용자 인증 미들웨어 추가

**예상 작업 시간**: 4-5시간

---

### 2.2 스트리밍 응답 구현 ⚠️ **중간 우선순위**

**현재 상태**: `streamChat()` 메서드는 있으나 엔드포인트 미구현

**구현 작업**:
1. **백엔드 스트리밍 엔드포인트 구현**
   ```javascript
   // src/server/routes.js
   POST /api/chat/stream
   - Server-Sent Events (SSE) 사용
   - 각 AI Provider의 streamChat() 호출
   - 청크 단위로 전송
   ```

2. **Orchestrator에 스트리밍 지원 추가**
   ```javascript
   // src/core/orchestrator.js
   async processStream(userId, sessionId, userMessage)
   - 전략에 따라 스트리밍 모드 선택
   - 각 협업 모드에 스트리밍 지원 추가
   ```

3. **프론트엔드 스트리밍 처리**
   ```javascript
   // public/app.js
   - EventSource 또는 fetch with stream 사용
   - 실시간으로 응답 표시
   - "생각하는 중..." 인디케이터와 연동
   ```

**예상 작업 시간**: 5-6시간

---

## 🔧 Phase 3: 시스템 안정화 및 최적화

### 3.1 에러 처리 및 로깅 강화

**구현 작업**:
1. **통합 에러 처리**
   - 각 AI Provider의 에러를 일관되게 처리
   - 사용자 친화적인 에러 메시지
   - 에러 로깅 시스템 구축

2. **성능 모니터링**
   - 각 AI 응답 시간 추적
   - `ai_performance` 테이블 활용
   - 느린 응답에 대한 경고

**예상 작업 시간**: 3-4시간

---

### 3.2 웹 검색 결과 품질 개선

**구현 작업**:
1. **검색 결과 필터링**
   - 관련성 높은 결과만 선택
   - 중복 제거
   - 신뢰할 수 있는 소스 우선순위

2. **검색 쿼리 최적화**
   - 사용자 질문을 검색 쿼리로 변환하는 로직 개선
   - 여러 검색어 조합 시도

**예상 작업 시간**: 2-3시간

---

## 🌟 Phase 4: 고급 기능 (장기 개선)

### 4.1 MCP (Model Context Protocol) 준비

**구현 작업**:
1. **MCP 구조 설계**
   - 도구(Tools) 인터페이스 정의
   - 리소스(Resources) 인터페이스 정의
   - 프로토콜 핸들러 구현

2. **기본 도구 통합**
   - 파일 읽기/쓰기
   - 웹 브라우저 제어 (향후)
   - 코드 실행 (향후)

**예상 작업 시간**: 10-15시간

---

### 4.2 자체 학습 시스템

**구현 작업**:
1. **AI 성능 추적**
   - `ai_performance` 테이블 활용
   - 각 AI의 성공률, 응답 시간, 사용자 만족도 추적

2. **패턴 학습**
   - 자주 사용되는 전략 패턴 학습
   - 사용자 선호도 학습
   - 메모리 기반 추천 시스템

3. **자동 최적화**
   - 성능이 좋은 AI를 우선 선택
   - 전략 선택 자동 개선

**예상 작업 시간**: 15-20시간

---

### 4.3 모듈화 및 패키징

**구현 작업**:
1. **독립 모듈 구조 설계**
   - Core 모듈 (Orchestrator)
   - Providers 모듈
   - Memory 모듈
   - 각각 독립적으로 사용 가능하도록

2. **간소화된 API 인터페이스**
   ```javascript
   // athena-core 패키지
   export class AthenaCore {
     constructor(config)
     async chat(userId, message, context)
     getMemory(userId)
   }
   ```

3. **npm 패키지 배포**
   - package.json 설정
   - 문서화
   - 예제 코드 작성

**예상 작업 시간**: 8-10시간

---

## 📋 권장 진행 순서

### 즉시 시작 (이번 주)
1. ✅ **출처 표시 강화** (2-3시간)
2. ✅ **Debate 모드 세부 내용 표시** (3-4시간)

### 단기 (다음 2주)
3. ✅ **Google 로그인 구현** (4-5시간)
4. ✅ **스트리밍 응답 구현** (5-6시간)

### 중기 (다음 달)
5. ✅ **에러 처리 강화** (3-4시간)
6. ✅ **웹 검색 품질 개선** (2-3시간)

### 장기 (향후)
7. ✅ **MCP 준비** (10-15시간)
8. ✅ **자체 학습 시스템** (15-20시간)
9. ✅ **모듈화** (8-10시간)

---

## 🎯 최우선 작업 추천

**이번 주에 바로 시작할 작업:**

### 1. 출처 표시 강화 (가장 빠르고 효과적)
- 사용자 경험 즉시 개선
- 개발 계획서 요구사항 충족
- 작업 시간: 2-3시간

### 2. Debate 모드 세부 내용 표시
- 개발 계획서의 명시적 요구사항
- 사용자가 AI들의 사고 과정을 볼 수 있음
- 작업 시간: 3-4시간

**총 예상 시간**: 5-7시간 (하루 작업량)

---

## 💡 추가 제안

### 빠른 개선 사항 (1시간 이내)
- 웹 검색 결과를 클릭 가능한 링크로 표시
- 메타데이터 배지 스타일 개선
- 로딩 인디케이터 개선

### 테스트 및 문서화
- 각 기능별 테스트 코드 작성
- API 문서 업데이트
- 사용자 가이드 작성

---

## 📝 체크리스트

### Phase 1 (즉시)
- [ ] 출처 표시 강화
- [ ] Debate 모드 세부 내용 표시

### Phase 2 (단기)
- [ ] Google 로그인 구현
- [ ] 스트리밍 응답 구현

### Phase 3 (중기)
- [ ] 에러 처리 강화
- [ ] 웹 검색 품질 개선

### Phase 4 (장기)
- [ ] MCP 준비
- [ ] 자체 학습 시스템
- [ ] 모듈화

---

**다음 단계**: Phase 1 작업부터 시작하는 것을 강력히 권장합니다!

